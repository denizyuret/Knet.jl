<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Setting up Knet · Knet.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Knet.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Setting up Knet</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Tips-for-developers"><span>Tips for developers</span></a></li><li><a class="tocitem" href="#Using-Amazon-AWS"><span>Using Amazon AWS</span></a></li><li><a class="tocitem" href="#Using-Microsoft-Azure"><span>Using Microsoft Azure</span></a></li><li><a class="tocitem" href="#Using-Ubuntu18.04"><span>Using Ubuntu18.04</span></a></li></ul></li><li><a class="tocitem" href="../tutorial/">Introduction to Knet</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul></li><li><span class="tocitem">Textbook</span><ul><li><a class="tocitem" href="../backprop/">Backpropagation and SGD</a></li><li><a class="tocitem" href="../softmax/">Softmax Classification</a></li><li><a class="tocitem" href="../mlp/">Multilayer Perceptrons</a></li><li><a class="tocitem" href="../cnn/">Convolutional Neural Networks</a></li><li><a class="tocitem" href="../rnn/">Recurrent Neural Networks</a></li><li><a class="tocitem" href="../rl/">Reinforcement Learning</a></li><li><a class="tocitem" href="../opt/">Optimization</a></li><li><a class="tocitem" href="../gen/">Generalization</a></li><li><a class="tocitem" href="../nce/">Noise Contrastive Estimation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Setting up Knet</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Setting up Knet</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/denizyuret/Knet.jl/blob/master/docs/src/install.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Setting-up-Knet"><a class="docs-heading-anchor" href="#Setting-up-Knet">Setting up Knet</a><a id="Setting-up-Knet-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-Knet" title="Permalink"></a></h1><p>Knet.jl is a deep learning package implemented in Julia, so you should be able to run it on any machine that can run Julia. It has been extensively tested on Linux machines with NVIDIA GPUs and CUDA libraries, and it has been reported to work on OSX and Windows.  If you would like to try it on your own computer, please follow the instructions on <a href="#Installation">Installation</a>. If you would like to try working with a GPU and do not have access to one, take a look at <a href="#Using-Amazon-AWS">Using Amazon AWS</a> or <a href="#Using-Microsoft-Azure">Using Microsoft Azure</a>. If you find a bug, please open a <a href="https://github.com/denizyuret/Knet.jl/issues">GitHub issue</a>. If you would like to contribute to Knet, see <a href="#Tips-for-developers">Tips for developers</a>. If you need help, or would like to request a feature, please use the <a href="https://groups.google.com/forum/#!forum/knet-users">knet-users</a> mailing list.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>For best results install (1) Julia, (2) CUDA.jl, (3) Knet.jl in that order. Step (2) can be skipped if you do not need GPU support. An optional step (4) below describes how to interact with the Knet tutorial notebooks.</p><ol><li><p><strong>Julia:</strong> Download and install the latest version of Julia from <a href="http://julialang.org/downloads">julialang.org</a>. As of this writing the latest version is 1.4.2 and I have tested Knet using 64-bit binaries for Generic Linux on x86, macOS, and Windows.</p></li><li><p><strong>CUDA.jl:</strong> If you are going to use an NVIDIA GPU, start Julia and install CUDA.jl with <code>using Pkg; Pkg.add(&quot;CUDA&quot;)</code>. The Julia CUDA stack requires users to have a functional NVIDIA driver, see <a href="https://juliagpu.gitlab.io/CUDA.jl/installation/overview">CUDA.jl installation instructions</a> for detailed requirements. You can test your installation with <code>using CUDA; CUDA.functional()</code>, if CUDA is not functional, Knet will not be able to use the GPU.</p></li><li><p><strong>Knet:</strong> to install Knet start Julia and run <code>using Pkg; Pkg.add(&quot;Knet&quot;)</code>. If you have problems with the installation, you can get support from <a href="https://groups.google.com/forum/#!forum/knet-users">knet-users</a>.</p></li><li><p><strong>Tutorial:</strong> The best way to learn Knet is through the included <a href="https://github.com/denizyuret/Knet.jl/tree/master/tutorial">Jupyter notebooks</a>. You need the IJulia package to run the notebooks which can be installed with: <code>using Pkg; Pkg.add(&quot;IJulia&quot;)</code>. You can then interact with the tutorial notebooks with: <code>using IJulia, Knet; notebook(dir=Knet.dir(&quot;tutorial&quot;))</code>. This should open a browser with a list of tutorial notebooks. If you have not used Jupyter before, please take a look at Jupyter notebook tutorials online. Note that the first time <code>notebook()</code> is run, there may be a long startup time for installations.</p></li></ol><h2 id="Tips-for-developers"><a class="docs-heading-anchor" href="#Tips-for-developers">Tips for developers</a><a id="Tips-for-developers-1"></a><a class="docs-heading-anchor-permalink" href="#Tips-for-developers" title="Permalink"></a></h2><p>Knet is an open-source project and we are always open to new contributions: bug fixes, new machine learning models and operators, inspiring examples, benchmarking results are all welcome. If you&#39;d like to contribute to the code base, please sign up at the <a href="https://groups.google.com/forum/#!forum/knet-dev">knet-dev</a> mailing list and follow these tips:</p><ul><li>Please get an account at <a href="https://www.github.com">github.com</a>.</li><li><a href="https://help.github.com/articles/fork-a-repo">Fork</a> the <a href="https://github.com/denizyuret/Knet.jl">Knet   repository</a>.</li><li>Point Julia to your fork with   <code>using Pkg; pkg&quot;dev git@github.com:your-username/Knet.jl.git&quot;</code>.</li><li>Make sure your <a href="https://help.github.com/articles/syncing-a-fork">fork is   up-to-date</a>.</li><li>Retrieve the latest version of the master branch using   <code>git pull</code> in the Knet directory.</li><li>Implement your contribution.  This typically involves:<ul><li>Creating a git branch.</li><li>Writing your code.</li><li>Adding documentation under doc/src and a summary in NEWS.md.</li><li>Adding unit tests in the test directory and using <code>Pkg.test(&quot;Knet&quot;)</code>.</li></ul></li><li>Please submit your contribution using a <a href="https://help.github.com/articles/using-pull-requests">pull   request</a>.</li></ul><h2 id="Using-Amazon-AWS"><a class="docs-heading-anchor" href="#Using-Amazon-AWS">Using Amazon AWS</a><a id="Using-Amazon-AWS-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Amazon-AWS" title="Permalink"></a></h2><p>If you don&#39;t have access to a GPU machine, but would like to experiment with one, <a href="https://aws.amazon.com">Amazon Web Services</a> is a possible solution. I have prepared a machine image (<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html">AMI</a>) with everything you need to run Knet. Here are step by step instructions for launching a GPU instance with a Knet image (the screens may have changed slightly since this writing):</p><p>1. First, you need to sign up and create an account following the instructions on <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a>. Once you have an account, open the <a href="https://console.aws.amazon.com/ec2">Amazon EC2 console</a> and login. You should see the following screen:</p><p><img src="../images/aws01.png" alt="image"/></p><p>2. Make sure you select the &quot;Ohio&quot; region in the upper right corner, then click on AMIs on the lower left menu. At the search box, choose &quot;Public images&quot; and search for &quot;Knet&quot;. Click on the latest Knet image (Knet-1.0.0 as of this writing). You should see the following screen with information about the Knet AMI. Click on the &quot;Launch&quot; button on the upper left.</p><p><img src="../images/aws02.png" alt="image"/></p><p>Note: Instead of &quot;Launch&quot;, you may want to experiment with &quot;<a href="https://aws.amazon.com/ec2/spot/pricing">Spot Request</a>&quot; under &quot;Actions&quot; to get a lower price. You may also qualify for an <a href="https://aws.amazon.com/grants">educational grant</a> if you are a student or researcher.</p><p>3. You should see the &quot;Step 2: Choose an Instance Type&quot; page. Pick one of the GPU instances (I have tested with the g2 series and the p2 series). Click on &quot;Review and Launch&quot;.</p><p><img src="../images/aws03.png" alt="image"/></p><p>4. This should take you to the &quot;Step 7: Review Instance Launch&quot; page. You can just click &quot;Launch&quot; here:</p><p><img src="../images/aws04.png" alt="image"/></p><p>5. You should see the &quot;key pair&quot; pop up menu. In order to login to your instance, you need an ssh key pair. If you have created a pair during the initial setup you can use it with &quot;Choose an existing key pair&quot;. Otherwise pick &quot;Create a new key pair&quot; from the pull down menu, enter a name for it, and click &quot;Download Key Pair&quot;. Make sure you keep the downloaded file, we will use it to login. After making sure you have the key file (it has a .pem extension), click &quot;Launch Instances&quot; on the lower right.</p><p><img src="../images/aws05.png" alt="image"/></p><p>6. We have completed the request. You should see the &quot;Launch Status&quot; page. Click on your instance id under &quot;Your instances are launching&quot;:</p><p><img src="../images/aws06.png" alt="image"/></p><p>7. You should be taken to the &quot;Instances&quot; screen and see the address of your instance where it says something like &quot;Public DNS: ec2-54-153-5-184.us-west-1.compute.amazonaws.com&quot;.</p><p><img src="../images/aws07.png" alt="image"/></p><p>8.  Open up a terminal (or Putty if you are on Windows) and type:</p><pre><code class="language-none">    ssh -i knetkey.pem ec2-user@ec2-54-153-5-184.us-west-1.compute.amazonaws.com</code></pre><p>Replacing <code>knetkey.pem</code> with the path to your key file and <code>ec2-54-153-5-184</code> with the address of your machine. If all goes well you should get a shell prompt on your machine instance.</p><p>9. There you can type <code>julia</code>, and at the julia prompt <code>using Pkg</code>, <code>Pkg.update()</code> and <code>Pkg.build(&quot;Knet&quot;)</code> to get the latest versions of the packages, as the versions in the AMI may be out of date:</p><pre><code class="language-none">[ec2-user@ip-172-31-24-60 deps]$ julia
               _
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  Type &quot;?&quot; for help, &quot;]?&quot; for Pkg help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 1.0.0 (2018-08-08)
 _/ |\__&#39;_|_|_|\__&#39;_|  |  Official https://julialang.org/ release
|__/                   |

julia&gt; using Pkg
julia&gt; Pkg.update()
julia&gt; Pkg.build(&quot;Knet&quot;)</code></pre><p>Finally you can run <code>Pkg.test(&quot;Knet&quot;)</code> to make sure all is good. This should take about 10-15 minutes. If all tests pass, you are ready to work with Knet:</p><pre><code class="language-none">julia&gt; Pkg.test(&quot;Knet&quot;)
INFO: Testing Knet
...
INFO: Knet tests passed

julia&gt;</code></pre><h2 id="Using-Microsoft-Azure"><a class="docs-heading-anchor" href="#Using-Microsoft-Azure">Using Microsoft Azure</a><a id="Using-Microsoft-Azure-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Microsoft-Azure" title="Permalink"></a></h2><p>Knet can be used with Azure. For GPU support, you need to create a virtual machine with GPU, for instance <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/nc-series">Standard_NC6</a> with Ubuntu18.04 as operating system. Then follow <a href="#Using-Ubuntu18.04">Using Ubuntu18.04</a>.</p><h2 id="Using-Ubuntu18.04"><a class="docs-heading-anchor" href="#Using-Ubuntu18.04">Using Ubuntu18.04</a><a id="Using-Ubuntu18.04-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Ubuntu18.04" title="Permalink"></a></h2><p>The CUDA stack can be installed using the following instructions:</p><pre><code class="language-shell">################################################################################
##### Prerequisites
################################################################################

sudo apt install make gcc g++ wget

################################################################################
##### driver
################################################################################
# The appropriate driver version can be selected here:
# http://www.nvidia.com/Download/index.aspx
# The following code is for Azure Standard_NC6 machines (K80 GPU)

wget http://us.download.nvidia.com/tesla/440.64.00/NVIDIA-Linux-x86_64-440.64.00.run
sudo sh NVIDIA-Linux-x86_64-440.64.00.run

################################################################################
##### toolkit
################################################################################
# the appropriate toolkit version can be selected here:
# https://developer.nvidia.com/cuda-downloads
# The following code is for Azure Standard_NC6 machines (K80 GPU)

wget http://developer.download.nvidia.com/compute/cuda/10.2/Prod/local_installers/cuda_10.2.89_440.33.01_linux.run
sudo sh cuda_10.2.89_440.33.01_linux.run

# add the following two lines to ~/.bashrc
PATH=$PATH:/usr/local/cuda-10.2/bin
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-10.2/lib64

sudo reboot now

################################################################################
##### cudnnn
################################################################################

# download cudnn using the browser
# https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html
# The following code is for Azure Standard_NC6 machines (K80 GPU)

tar -xzvf cudnn-10.2-linux-x64-v7.6.5.32.tgzsudo cp cuda/include/cudnn.h /usr/local/cuda/include
sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64
sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*</code></pre><p>Afterwards Knet can be installed as usual:</p><pre><code class="language-julia">julia&gt; using Pkg
julia&gt; Pkg.update()
julia&gt; Pkg.add(&quot;Knet&quot;)
julia&gt; Pkg.build(&quot;Knet&quot;)
julia&gt; using Knet; include(Knet.dir(&quot;test/gpu.jl&quot;))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../tutorial/">Introduction to Knet »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 22 February 2021 13:54">Monday 22 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
